# arch_assignment3

Αρχιτεκτονική Υπολογιστών 2021 Εργαστήριο 3

## Αρχιτεκτονική Υπολογιστών - Εργασία 3
#### Παρτσάνης Παναγιώτης - 8037
#### Διακονικολής Ιωάννης - 8802

### **Ερώτηση 1.1**


Η επικύρωση του McPAT έγινε συλλέγοντας τα αποτελέσματά του και συγκρίνοντάς τα με πραγματικά δεδομένα, τα οποία συλλέχθηκαν από διαφορετικούς επεξεργαστές με διαφορετικά χαρακτηριστικά. Στην συγκεκριμένη περίπτωση χρησιμοποιήθηκαν οι Niagara (90nm), Xeon (65nm) και Alpha (180nm). Αυτοί οι τρεις επεξεργαστές διαφέρουν αρκετά σε διάφορα κύρια χαρακτηριστικά τους, όπως για παράδειγμα η συχνότητα, στην κατανάλωση ηλεκτρικού ρεύματος, ο τρόπος εκτέλεσης των εντολών κτλ. Λόγω αυτής της μεγάλης ποικιλίας επεξεργαστών, η έρευνα γίνεται πιο ολοκληρωμένη και αξιόπιστη, αφού τα δεδομένα της αντλούνται από πολλές και διαφορετικές πηγές.

### **Ερώτηση 1.2**

* _Dynamic Power_ είναι η κατανάλωση ενέργειας που καταναλώνεται λόγω της φόρτισης και εκφόρτισης της χωρητικότητας της διασύνδεσης και της πύλης εισόδου κατά τη διάρκεια μιας μετάβασης σήματος και μπορεί να περιγραφεί με την παρακάτω σχέση: 

  Pdyn = C * V^2 * f
  
* _Short Circuit Power_ είναι η ισχύς βραχυκυκλώματος που οφείλεται στη διαδρομή ρεύματος συνεχούς ρεύματος που υπάρχει σε ένα κύκλωμα CMOS κατά τη διάρκεια μιας μετάβασης σήματος όταν η τάση του σήματος εισόδου αλλάζει μεταξύ Vtn και Vdd + Vtp.

* _Leakage Power_ είναι η ισχύς ρεύματος διαρροής που περιλαμβάνει δύο στοιχεία ισχύος, το υποκατώφλι και τα ρεύματα διαρροής πύλης. Η κατανάλωση ισχύος του υποκατωφλίου οφείλεται στο ρεύμα που ρέει κατά τη διάρκεια της περιοχής αποκοπής (κάτω από το όριο), προκαλώντας τη ροή ρεύματος Isub. Το στοιχείο διαρροής πύλης οφείλεται στο ρεύμα που διαρρέει το οξείδιο της πύλης, που συμβολίζεται ως Ig.Το μέγεθος αυτής της κατανάλωσης εξαρτάται από τα γεωμετρικά χαρακτηριστικά των transistor, τις φυσικές τους ιδιότητες και την θερμοκρασία τους. Η γενική τάση είναι ότι το leakage αυξάνεται για μικρότερα transistors και υψηλότερες θερμοκρασίες.

Ανεξαρτήτως από το τι πρόγραμμα χρησιμοποιείται, το Dynamic power παραμένει σταθερό, εφόσον όλοι οι παράμετροι που το επηρεάζουν, παραμένουν σταθεροί. Για να μεταβληθεί το Dynamic Power θα χρειαστεί να χρησιμοποιηθούν τεχνικές Gating και Dynamic Frequency Scaling, γιατί τότε εξαρτάται από τη δομή του προγράμματος όπως επίσης και από τους πολλαπλούς πυρήνες που μπορεί να χρησιμοποιηθούν. Για το Leakage Power, η κύρια παράμετρος που το επηρεάζει ειναι η θερμοκρασία, οπότε όσο παραπάνω χρόνο τρέχει το πρόγραμμα, τόσο αυξάνεται η θερμοκρασία, άρα και το Leakage Power.
  
**Βιβλιογραφία** : https://www.sciencedirect.com/topics/computer-science/dynamic-power-consumption

### **Ερώτηση 1.3**

Ένας επεξεργαστής με μεγαλύτερη κατανάλωση ισχύος (35Watt) μπορεί να προσφέρει μεγαλύτερη διάρκεια μπαταρίας από έναν άλλο με μικρότερη κατανάλωση (25Watt), αν μπορέσουμε να κλείσουμε τους επεξεργαστές αμέσως μετά το πέρας της εκτέλεσης των εντολών του προγράμματος, ώστε να καταφέρουμε να μην ανεβάσουμε κατά πολύ τη θερμοκρασία. Το αποτέλεσμα ιδανικά θα είναι ο επεξεργαστής των 35W να ολοκληρώσει όλες τις εντολές γρηγορότερα από τον άλλο των 25W, και με το "κλείσιμο" του επεξεργαστή να σταματήσουμε την αύξηση της θερμοκρασίας.Το McPAT μας δίνει  μετρήσεις ισχύος αλλά χρειαζόμαστε και τους χρόνους εκτέλεσης ώστε να υπολογίσουμε το power efficiency του CPU.


### **Ερώτηση 1.4**

Με την εκτέλεση του McPAT προκύπτουν τα παρακάτω:

|  | **Xeon.xml** | **ARM_A9_2GHz.xml** |
| ---------------- | ----------- | ----------- |
| **Dynamic Power** | 72.48 W | 2.884 W |
| **Leakage Power** | 36.95 W | 0.113 W |

Ακόμα και 40 φορές γρηγορότερα αν τρέξει ο ΧΕΟΝ, δεν θα καταφέρει να είναι πιο αποτελεσματικός ενεργειακά (energy efficient). Αυτό εύκολα το συμπεραίνουμε βλέποντας τον παραπάνω πίνακα, όπου οι διαφορές στις καταναλώσεις ισχύος είναι αισθητά πολύ μεγαλύτερες, και η διάρκεια εκτέλεσης του προγράμματος δεν μπορεί να συμβάλλει ουσιαστικά στο energy efficiency του επεξεργαστή.

### **Ερώτηση 2.1**

πρέπει να μετατρέψουμε το μοντέλο του gem5 σε αρχείο xml, συμβατό με το πρόγραμμα McPAT.H μετατροπή γίνεται εκτελώντσας  την εντολή:

python GEM5ToMcPAT.py stats.txt config.json inorder_arm.xml -o gem5.xml

Για το delay xρησιμοποιήσαμε το simseconds από τον φάκελο stats.txt για το κάθε ενα run του προγράμματος.

Το EDA το υπολογίσαμε χρησιμοποιώντας την συνάρτηση: 

energy = (leakage + dynamic) * runtime

eda = energy * runtime * area


specbzip2:

Το γινόμενο EDA γίνεται ελάχιστο ( 0.090655 ) με τις εξής παραμέτρους:
L1I_SIZE=32kB L1I_ASSOC=2 L1D_SIZE=64kB L1D_ASSOC=2 L2_SIZE=2MB L2_ASSOC=8 CACHELINE_SIZE=32

specmcf:

Το γινόμενο EDA γίνεται ελάχιστο ( 0.052468 ) με τις εξής παραμέτρους:
L1I_SIZE=32kB L1I_ASSOC=2 L1D_SIZE=64kB L1D_ASSOC=2 L2_SIZE=2MB L2_ASSOC=8 CACHELINE_SIZE=32

specsjeng:

Το γινόμενο EDA γίνεται ελάχιστο ( 3.319244 ) με τις εξής παραμέτρους:
L1I_SIZE=32kB L1I_ASSOC=2 L1D_SIZE=64kB L1D_ASSOC=4 L2_SIZE=2MB L2_ASSOC=8 CACHELINE_SIZE=64

spechmmer:

Το γινόμενο EDA γίνεται ελάχιστο ( 0.048082 ) με τις εξής παραμέτρους:
L1I_SIZE=32kB L1I_ASSOC=2 L1D_SIZE=64kB L1D_ASSOC=2 L2_SIZE=2MB L2_ASSOC=8 CACHELINE_SIZE=32

speclibm:

Το γινόμενο EDA γίνεται ελάχιστο ( 0.402260 ) με τις εξής παραμέτρους:
L1I_SIZE=32kB L1I_ASSOC=2 L1D_SIZE=64kB L1D_ASSOC=4 L2_SIZE=2MB L2_ASSOC=8 CACHELINE_SIZE=64


Παρακάτω δείχνουμε ενδεικτικά κάποια διαγράμματα που δείχνουν πως επηρεάζεται το EDA με κάθε αλλαγή που κάναμε σε χαρακτηριστικά του προγράμματος:

![image](https://user-images.githubusercontent.com/95228714/150543258-18e14658-6cdd-4eca-b34f-6e739e84470e.png)

![image](https://user-images.githubusercontent.com/95228714/150543751-a512d92e-3a20-49b2-aed0-f12b24897a53.png)

![image](https://user-images.githubusercontent.com/95228714/150543807-8e2724b4-6de2-4d00-9746-11330410c207.png)

![image](https://user-images.githubusercontent.com/95228714/150543897-488c6e4a-7aed-4e0c-93c6-cc931d0e563e.png)

Και εδώ διαγράμματα που δείχνουν πως επηρεάζεται το Peak Power:

![image](https://user-images.githubusercontent.com/95228714/150544185-db2fc2d9-2d8f-4ca9-ae7f-4700c3b5a162.png)

![image](https://user-images.githubusercontent.com/95228714/150544237-f2a03fca-4451-40f2-99b2-7f4450983dac.png)

![image](https://user-images.githubusercontent.com/95228714/150544674-bb012b20-46b7-4274-9a66-d2f061507243.png)


![image](https://user-images.githubusercontent.com/95228714/150544422-391d5966-7fae-4be0-b0eb-c011dad71792.png)



**Αξιολόγηση Εργασιών**

Συνολικά και για τις 3 εργασίες, μας άρεσε πολύ που χρησιμοποιήσαμε περιβάλλον linux για παραπάνω εξοικείωση με το λογισμικό καθώς και πως να κανουμε ενα virtual machine. Υπήρχαν μερικά ερωτήματα για τα οποία χρειάστηκε αρκετό ψάξιμο και σκέψη (όπως το ερώτημα με το κόστος, ή ποιες και τι επαναλήψεις να κάνουμε για να βρουμε το ελάχιστο CPI. Γενικά υπήρχαν αρκετά ενδιαφέρον πράγματα που μάθαμε και από τις 3 εργασίες. Οι εργασίες χρειάστηκαν αρκετή ώρα για να γίνουν, όχι τόσο η πρώτη όμως.Τελος είδαμε και πόσο σημαντική είναι η ενέργεια που δαπανά ένας επεξεργαστής σε σχέση με την απόδοση του και το είδαμε μέσω του 3ου εργαστηρίου με το κατάληλο πρόγραμμα(mcpat).  
